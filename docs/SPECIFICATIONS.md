# バーコード生成アプリ 仕様書 v1.1.0

## 1. システム概要
### 1.1 目的
複数のバーコードを効率的に生成し、PDF・PNG・SVG形式で保存できるデスクトップアプリケーションを提供する。

### 1.2 対象ユーザー
- バーコードを扱う業務従事者
- 在庫管理や商品管理を行う事業者

## 2. 機能仕様

### 2.1 バーコード生成機能
- 初期状態で5つのバーコード入力フィールドを表示
- 追加ボタンで入力フィールドを無制限に追加可能
- **削除機能**: 不要なバーコード行を個別に削除可能（2個以上ある場合のみ）
- 各フィールドで以下の情報を入力
  - バーコード番号
  - バーコードタイプ
    - JANコード（EAN-13）
    - ITFコード
    - GS1データバー（CODE128形式で生成）
  - **名前**（オプション）: バーコードの識別用名称
  - **備考**（オプション）: 追加情報やメモ

### 2.2 バーコード表示機能
- 「バーコードを作成」ボタンクリックで一括生成
- 入力値の自動バリデーション
- JANコードの場合のみチェックデジット検証
- エラー時はコンソールにエラーメッセージを表示
- 名前・備考がある場合はバーコード下に表示

### 2.3 保存機能
#### 2.3.1 個別保存
- **PNG形式での保存**
  - 解像度：標準
  - 名前・備考付きで画像生成
  - ファイル名：barcode-{名前}-{番号}.png（名前がある場合）
- **SVG形式での保存**
  - ベクター形式
  - 名前・備考付きで画像生成
  - ファイル名：barcode-{名前}-{番号}.svg（名前がある場合）

#### 2.3.2 PDF一括出力機能
- **複数バーコードの一括PDF出力**
  - 全バーコードを1つのPDFファイルにまとめて出力
  - バーコード数に応じたサイズ自動調整：
    - 1個: 大きめサイズ（160×80px）
    - 2-3個: 中サイズ（140×60px）
    - 4個以上: 小さめサイズ（120×45px）
  - 名前・備考も含めてPDF出力
  - ファイル名：barcodes-{タイムスタンプ}.pdf
  - 自動ページ分割対応

### 2.4 一括操作機能
- バーコードタイプの一括変更
- 入力値の一括クリア

### 2.5 バーコードセット管理機能
- バーコードセットの保存
  - セット名をつけて現在の入力内容を保存
  - LocalStorageに保存データを永続化
- バーコードセットのエクスポート/インポート
  - JSONファイル形式でのエクスポート
  - エクスポートしたファイルのインポート
  - 既存のセットと結合して保存
- バーコードセットの削除
  - 各セットに削除ボタンを表示
  - 確認ダイアログ表示後に削除
  - LocalStorageから完全に削除
- バーコードセットの呼び出し
  - サイドバーに保存済みセット一覧を表示
  - クリックで即座に呼び出し可能
- 保存データの表示
  - セット名
  - 作成日時

## 3. 技術仕様

### 3.1 入力値制限
- スペース、ハイフン、全角スペースは自動除去
- バーコードタイプごとの桁数制限
  - JANコード：13桁
  - ITFコード：偶数桁
  - GS1データバー：13桁

### 3.2 UI仕様
- レスポンシブデザイン対応
- Tailwind CSSによるスタイリング
- アイコン表示：react-iconsを使用（FaFileImage, FaFilePdf, FaTrash等）
- **削除ボタン**: グレー背景でホバー時に赤色に変化
- **PDF一括出力ボタン**: バーコード生成後に左上に表示
- **PNG/SVGボタン**: 横並び配置で省スペース化
- ダークモード対応
  - クラスベースでの切り替え
  - LocalStorageによる設定の永続化
  - ヘッダーでの切り替えボタン表示
  - 以下の要素に対応：
    - 背景色
    - テキストカラー
    - ボタン
    - 入力フィールド
    - セレクトボックス
    - バーコード表示エリア

### 3.3 エラーハンドリング
- 不正な入力値の場合はアラート表示
- バーコード生成失敗時はエラーメッセージを表示

### 3.4 カラーパレット
- ライトモード
  - 背景：白（#FFFFFF）
  - テキスト：濃いグレー（#111827）
  - 入力フィールド：白背景、グレーボーダー
  - プライマリーボタン：青（#3B82F6）
  - セカンダリーボタン：緑（#22C55E）

- ダークモード
  - 背景：濃いグレー（#111827）
  - テキスト：白（#FFFFFF）
  - 入力フィールド：やや明るいグレー（#1F2937）
  - プライマリーボタン：濃い青（#2563EB）
  - セカンダリーボタン：濃い緑（#16A34A）

## 4. 動作環境
- **OS**: macOS 10.12以降（現バージョン）
- **アーキテクチャ**: Apple Silicon (M1/M2/M3) ARM64
- **推奨解像度**: 1280x720以上
- **必要な権限**: ファイルシステムアクセス（ダウンロード用）

## 5. 技術スタック
- **フロントエンド**: React 18, TypeScript, Tailwind CSS
- **デスクトップ**: Electron 33
- **バーコード生成**: JsBarcode
- **PDF生成**: jsPDF
- **アイコン**: React Icons
- **ビルドツール**: Vite, electron-builder
- **開発環境**: Node.js 18+, npm 9+

## 6. ファイル構成
```
src/
├── main/              # Electronメインプロセス
├── renderer/          # Reactアプリケーション
│   ├── components/    # UIコンポーネント
│   ├── hooks/         # カスタムフック
│   ├── types/         # TypeScript型定義
│   └── utils/         # ユーティリティ関数
├── assets/            # アプリアイコンなど
└── build/             # ビルド設定
```

## 7. 将来の拡張予定
- 他OS対応（Windows, Linux）
- QRコード生成機能
- CSV一括インポート
- クラウド同期機能
- API連携機能